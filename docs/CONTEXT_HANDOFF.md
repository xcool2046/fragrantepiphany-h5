# Context Handoff: Fragrant Epiphany H5

## ğŸ“Š å½“å‰è¿›åº¦å¿«ç…§ (Progress Snapshot)
- **é¡¹ç›®é˜¶æ®µ**: ä½“éªŒä¼˜åŒ–ä¸æ–‡æ¡£åŒæ­¥å®Œæˆï¼Œå‡†å¤‡è¿›å…¥ **åå°ç®¡ç†ç³»ç»Ÿ (Admin Panel)** å¼€å‘é˜¶æ®µã€‚
- **å·²éªŒè¯åŠŸèƒ½**:
  1. **å…¨ç«™éª¨æ¶å± (Skeleton Loading)**: é—®å·é¡µã€ç»“æœé¡µã€é¦™æ°´é¡µå·²å®ç°éª¨æ¶å±åŠ è½½ï¼Œæ›¿ä»£äº†è½¬åœˆ Loadingï¼Œä½“éªŒæµç•…ï¼ˆå·²é€šè¿‡æœ¬åœ° Build éªŒè¯ï¼‰ã€‚
  2. **åŒè¯­å›½é™…åŒ– (Localization)**: é¦™æ°´é¡µçš„ä¸­è‹±æ–‡åˆ‡æ¢å®Œå…¨æ‰“é€šï¼Œåç«¯æ•°æ®åº“æ”¯æŒ `_en` å­—æ®µï¼Œå‰ç«¯æ ¹æ®è¯­è¨€è‡ªåŠ¨å–å€¼ï¼ˆå·²éªŒè¯ DB æ•°æ®ä¸å‰ç«¯æ˜¾ç¤ºï¼‰ã€‚
  3. **æ–‡æ¡£åŒæ­¥**: `docs/` ç›®å½•ä¸‹çš„æ–‡æ¡£ï¼ˆå¼€å‘æŒ‡å—ã€éƒ¨ç½²æ–‡æ¡£ã€Schemaã€Roadmapï¼‰å·²ä¸ä»£ç å®Œå…¨å¯¹é½ã€‚
  4. **éƒ¨ç½²æµç¨‹**: `deploy.sh` è„šæœ¬å¯ç”¨ï¼Œé‡‡ç”¨ "Local Build + Static Docker" ç­–ç•¥ï¼Œè§£å†³äº†æœåŠ¡å™¨å†…å­˜ä¸è¶³é—®é¢˜ã€‚

## ğŸ’¡ å…³é”®æŠ€æœ¯æ–¹æ¡ˆä¸æŠ€å·§ (Key Solutions & Techniques)
- **éª¨æ¶å±å®ç° (Skeleton Screens)**:
  - **æ–¹æ¡ˆ**: ä¸ºæ ¸å¿ƒé¡µé¢åˆ›å»ºå¯¹åº”çš„ `*Skeleton.tsx` ç»„ä»¶ï¼ˆå¦‚ `PerfumeSkeleton.tsx`ï¼‰ï¼Œå¤ç”¨åŸé¡µé¢å¸ƒå±€ä½†ä½¿ç”¨ `animate-pulse` ç°è‰²å—ä»£æ›¿å†…å®¹ã€‚
  - **é€»è¾‘**: åœ¨ä¸»ç»„ä»¶ï¼ˆå¦‚ `PerfumeView.tsx`ï¼‰çš„ `if (loading)` åˆ†æ”¯ç›´æ¥æ¸²æŸ“ Skeleton ç»„ä»¶ï¼Œè€Œéé€šç”¨ Spinnerã€‚
- **å›½é™…åŒ–æ•°æ®æµ (Data Localization)**:
  - **çº¦å®š**: æ•°æ®åº“è¡¨ï¼ˆå¦‚ `perfumes`ï¼‰ä½¿ç”¨ `field` (ä¸­æ–‡) å’Œ `field_en` (è‹±æ–‡) åŒå­—æ®µå­˜å‚¨ã€‚
  - **API**: åç«¯ Entity ç›´æ¥è¿”å›æ‰€æœ‰å­—æ®µï¼Œå‰ç«¯æ ¹æ® `i18n.language` åŠ¨æ€é€‰æ‹©æ˜¾ç¤ºï¼ˆä¾‹å¦‚ `isZh ? data.name : data.name_en`ï¼‰ã€‚
- **éƒ¨ç½²ç­–ç•¥ (Deployment)**:
  - **æ ¸å¿ƒ**: **ä¸è¦åœ¨æœåŠ¡å™¨è¿è¡Œ `npm install` æˆ– `npm run build`**ã€‚
  - **æµç¨‹**: æœ¬åœ°æ„å»º `dist` -> `rsync` ä¸Šä¼  -> æœåŠ¡å™¨ Docker ä»…æŒ‚è½½/å¤åˆ¶é™æ€æ–‡ä»¶ -> é‡å¯ Nginx/Backend å®¹å™¨ã€‚è¯·åšæŒä½¿ç”¨ `./deploy.sh`ã€‚
- **ç¡¬ç¼–ç é‡æ„**:
  - å¸¸é‡æå–è‡³ `frontend/src/config/` æˆ– `frontend/src/constants/`ï¼Œé¿å…åœ¨ç»„ä»¶å†…ç¡¬ç¼–ç ä¸šåŠ¡æ•°æ®ï¼ˆå¦‚èƒŒæ™¯å›¾æ˜ å°„ã€Mock é—®é¢˜ï¼‰ã€‚

## ğŸš§ é—ç•™éš¾ç‚¹ä¸å¾…åŠ (Pending Issues)
- **Admin Panel å¼€å‘ (High Priority)**:
  - **çŠ¶æ€**: æœªå¼€å§‹ã€‚
  - **ç›®æ ‡**: å®ç°é¦™æ°´æ•°æ® (`perfumes` è¡¨) çš„ CRUD ç®¡ç†ç•Œé¢ï¼Œæ”¯æŒå›¾ç‰‡ä¸Šä¼ ã€‚
  - **å‚è€ƒ**: `backend/src/admin/admin.controller.ts` (ç°æœ‰åŸºç¡€ä»£ç )ï¼Œ`docs/00-guide/roadmap.md` (ä»»åŠ¡è§„åˆ’)ã€‚
- **Result é¡µ Mock é€»è¾‘**:
  - **çŠ¶æ€**: å½“å‰ä½¿ç”¨ `?debug=unlocked` æˆ–ç‚¹å‡»æ ‡é¢˜ 5 æ¬¡è§¦å‘è§£é”ã€‚
  - **æ³¨æ„**: ä¸Šçº¿å‰éœ€ç¡®ä¿æ­¤é€»è¾‘ä»…åœ¨å¼€å‘ç¯å¢ƒç”Ÿæ•ˆæˆ–è¢«ç§»é™¤ï¼ˆå½“å‰ä»£ç æœªä¸¥æ ¼é™åˆ¶ç¯å¢ƒï¼‰ã€‚

## ğŸ“‚ æ ¸å¿ƒæ–‡ä»¶ç»“æ„ (Core Directory Structure)
```text
h5-web/
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ admin/             # åå°ç®¡ç† API (å¾…æ‰©å±•)
â”‚   â”‚   â”œâ”€â”€ entities/          # TypeORM å®ä½“ (Perfume.ts, Card.ts)
â”‚   â”‚   â”œâ”€â”€ migrations/        # æ•°æ®åº“è¿ç§»æ–‡ä»¶ (é‡è¦: åŒ…å«ç§å­æ•°æ®)
â”‚   â”‚   â””â”€â”€ perfume/           # é¦™æ°´æ¨¡å—ä¸šåŠ¡é€»è¾‘
â”‚   â”œâ”€â”€ deploy.sh              # æ ¸å¿ƒéƒ¨ç½²è„šæœ¬ (Local Build -> Server)
â”‚   â””â”€â”€ ormconfig.ts           # DB é…ç½®
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/        # UI ç»„ä»¶ (å« *Skeleton.tsx)
â”‚   â”‚   â”œâ”€â”€ config/            # ä¸šåŠ¡é…ç½® (perfume-constants.ts)
â”‚   â”‚   â”œâ”€â”€ pages/             # é¡µé¢è§†å›¾ (PerfumeView, Result, Question)
â”‚   â”‚   â””â”€â”€ locales/           # i18n é™æ€ç¿»è¯‘æ–‡ä»¶ (en.json, zh.json)
â””â”€â”€ docs/                      # é¡¹ç›®æ–‡æ¡£ (å·²æ›´æ–°ï¼ŒSingle Source of Truth)
```

## â¡ï¸ ä¸‹ä¸€æ­¥æŒ‡ä»¤ (Next Action)
1. **é˜…è¯»è·¯çº¿å›¾**: é¦–å…ˆé˜…è¯» `docs/00-guide/roadmap.md`ï¼Œç¡®è®¤ Task 1 (Admin Panel) çš„å…·ä½“è¦æ±‚ã€‚
2. **å¯åŠ¨å¼€å‘**:
   - åç«¯: åœ¨ `backend/src/admin` ä¸­æ‰©å±•æ¥å£ï¼Œæ”¯æŒ `Perfume` å®ä½“çš„å¢åˆ æ”¹æŸ¥ã€‚
   - å‰ç«¯: åœ¨ `frontend/src/pages/admin` ä¸‹åˆ›å»ºé¦™æ°´ç®¡ç†é¡µé¢ã€‚
3. **ç¯å¢ƒæ³¨æ„**: è¿è¡Œ `npm run dev` å‰ç¡®ä¿æœ¬åœ° Postgres æ•°æ®åº“å·²å¯åŠ¨ä¸” Migrations å·²è¿è¡Œ (`npm run typeorm -- migration:run`)ã€‚
4. **åˆ‡å‹¿**: **ä¸è¦ä¿®æ”¹ `deploy.sh` çš„æ ¸å¿ƒé€»è¾‘**ï¼ˆæœ¬åœ°æ„å»ºç­–ç•¥ï¼‰ï¼Œè¿™æ˜¯ä¸ºäº†é€‚é…ä½é…æœåŠ¡å™¨çš„ç¡¬æ€§è¦æ±‚ã€‚
5. **éªŒè¯**: å¼€å‘ Admin åŠŸèƒ½æ—¶ï¼Œè¯·åŒæ—¶éªŒè¯æ•°æ®å†™å…¥åï¼Œå‰å° Perfume Page æ˜¯å¦èƒ½æ­£å¸¸è¯»å–å¹¶å±•ç¤ºï¼ˆå«åŒè¯­ï¼‰ã€‚
