# 桌面端女神背景图显示问题诊断文档

## 📋 问题描述

**症状**：桌面端（宽度 > 768px）女神背景图几乎不可见或非常淡，而移动端显示正常。

**期望效果**：桌面端女神像应该跟移动端一样，在页面顶部清晰可见（淡但轮廓明显）。

---

## 🔍 问题诊断过程（失败记录）

### 第一次分析（错误）

**我的判断**：
- 认为问题是 `overflow-hidden` + 径向渐变遮罩 + 桌面端宽度 `md:w-auto` 导致图片过窄

**尝试的方案**：
```tsx
// 修改 1
md:w-[120vw]  // 扩大宽度
md:top-[-5vh]  // 上移到顶部
md:bg-[radial-gradient(circle_closest-side,transparent_50%,#F7F2ED_85%)]  // 扩大透明区域
```

**结果**：❌ 女神像完全消失

**失败原因**：`md:top-[-5vh]` 让容器向上跑出视口，被外层 `overflow-hidden` 裁掉了

---

### 第二次分析（错误）

**我的判断**：
- 认为负偏移导致被裁剪，应该改为正值

**尝试的方案**：
```tsx
md:top-[0]  // 改回视口内
保持 md:w-[120vw] 和 md:transparent_50%
```

**结果**：❌ 女神像还是完全不可见

**失败原因（我的猜测）**：
- 我分析说是遮罩圆心距离女神像太远
- **但我没有验证这个分析是否正确**

---

### 第三次尝试（临时有效但没找到根因）

**方案**：回退所有桌面端特殊参数，让桌面端跟移动端完全一样
```tsx
// 移除所有 md: 前缀的宽度、位置、遮罩参数
// 只保留 md:h-[82vh]（桌面端高度稍高）
```

**结果**：✅ 女神像可见了，但比移动端淡很多

**用户反馈**：女神像太淡

---

### 第四次调整（当前方案）

**方案**：
```tsx
md:w-[120vw]  // 缩小桌面端宽度（从 150vw 到 120vw）
md:bg-[radial-gradient(circle_closest-side,transparent_40%,#F7F2ED_85%)]  // 增大透明区域（从 25% 到 40%）
```

**结果**：⏳ 待验证（用户尚未确认）

---

## ❌ 我没有找到的真实问题

### 我的失败点

1. **没有真正理解为什么移动端可见，桌面端不可见**
   - 我只是猜测了遮罩、宽度、位置的影响
   - 我没有用开发者工具实际测量圆心位置、透明区域半径、女神像实际位置

2. **没有找到根本原因**
   - 为什么 `w-[150vw]` 在移动端可见，在桌面端就几乎不可见？
   - 是因为宽度拉伸导致图片密度降低？
   - 还是因为桌面端的遮罩计算方式不同？
   - 还是因为其他 CSS 属性的叠加效果？

3. **没有验证我的分析**
   - 我提出了很多假设（遮罩圆心距离、透明区域半径）
   - 但我没有用浏览器开发者工具实际验证这些数值
   - 我只是在猜测和试错

---

## 📊 客观事实（已知）

### 移动端（可见）

```tsx
// 容器
className="... top-[-15%] w-[150vw] h-[65vh] ..."

// 遮罩
bg-[radial-gradient(circle_closest-side,transparent_25%,#F7F2ED_85%)]

// 其他效果
opacity: 0.2
mix-blend-multiply
grayscale
contrast-110
```

**效果**：女神像在顶部清晰可见，淡但轮廓明显

### 桌面端（初始状态：不可见）

```tsx
// 容器（跟移动端一样）
className="... top-[-15%] w-[150vw] h-[65vh] md:h-[82vh] ..."

// 遮罩（跟移动端一样）
bg-[radial-gradient(circle_closest-side,transparent_25%,#F7F2ED_85%)]
```

**效果**：女神像非常淡，几乎不可见

**差异**：
- 只有高度不同（`md:h-[82vh]` vs `h-[65vh]`）
- `w-[150vw]` 在桌面端的绝对像素值远大于移动端
  - 移动端（假设宽度 375px）：`150vw = 562px`
  - 桌面端（假设宽度 1920px）：`150vw = 2880px`

**我的推测（未验证）**：
- 桌面端容器太宽（2880px），女神像被拉得很宽
- 加上 `opacity: 0.2` + 各种滤镜，整体密度降低，看起来更淡

---

## 🔧 当前临时方案

### 代码位置
`/home/projects/h5/frontend/src/pages/Home.tsx:40-42`

### 当前参数
```tsx
// 容器 (Line 40)
className="absolute top-[-15%] left-1/2 -translate-x-1/2 w-[150vw] h-[65vh] md:w-[120vw] md:h-[82vh] xl:h-[80vh] mix-blend-multiply pointer-events-none"

// 遮罩 (Line 42)
<div className="absolute inset-0 bg-[radial-gradient(circle_closest-side,transparent_25%,#F7F2ED_85%)] md:bg-[radial-gradient(circle_closest-side,transparent_40%,#F7F2ED_85%)] z-10" />
```

### 修改说明
- 移动端：保持不变（`w-[150vw]`, `transparent_25%`）
- 桌面端：
  - 宽度缩小：`md:w-[120vw]`（从 150vw 缩小）
  - 透明区域扩大：`md:transparent_40%`（从 25% 扩大到 40%）

---

## ❓ 待解决的问题

1. **为什么 `w-[150vw]` 在移动端可见，桌面端几乎不可见？**
   - 需要用开发者工具实际测量圆心位置和透明区域
   - 需要验证是否是宽度拉伸导致密度降低

2. **`transparent_40%` 是否足够？**
   - 需要用户确认效果
   - 可能需要继续调整透明度（50%、60%？）

3. **`md:w-[120vw]` 是否是最佳宽度？**
   - 可能需要调整为 100vw、110vw 或其他值
   - 需要根据实际效果微调

4. **是否有其他 CSS 属性影响？**
   - `mix-blend-multiply` 在不同尺寸下的表现
   - `grayscale` 和 `contrast-110` 的叠加效果
   - 外层 Vignette 遮罩的影响

---

## 📝 教训总结

1. **先验证，再修改**
   - 应该用开发者工具实际测量数值
   - 不应该基于猜测就直接修改代码

2. **理解根本原因，而不是试错**
   - 我只是在试不同的参数组合
   - 我没有真正理解为什么某个参数有效

3. **记录失败的尝试**
   - 失败的方案也有价值
   - 可以帮助下一个人避免重复错误

---

## 🔄 下一步

1. **用户验证当前方案效果**
   - 刷新浏览器查看桌面端女神像是否清晰
   - 与移动端对比效果

2. **根据反馈微调参数**
   - 如果还是太淡：增大 `transparent` 到 50% 或 60%
   - 如果太宽：减小 `md:w-[120vw]` 到 100vw 或 110vw

3. **找到真正的根本原因**（待完成）
   - 为什么相同的参数在移动端和桌面端表现不同
   - 是否有更优雅的解决方案

---

**创建日期**：2025-12-06
**状态**：🟡 临时方案已实施，根本原因未找到
**责任人**：Claude Code (AI)
